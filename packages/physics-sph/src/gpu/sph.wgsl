struct Particle { pos: vec4<f32>, vel: vec4<f32>, rho: f32, pad: vec3<f32> }; @group(0) @binding(0) var<storage, read_write> particles : array<Particle>; @compute @workgroup_size(128) fn main(@builtin(global_invocation_id) gid: vec3<u32>) { let i = gid.x; if (i >= arrayLength(&particles)) { return; } var p = particles[i]; p.vel.y -= 9.81 * 0.016; p.pos.xyz += p.vel.xyz * 0.016; particles[i] = p; }
